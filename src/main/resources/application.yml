server:
  port: 8088

logging:
  level:
    root: WARN
    org.budgetanalyzer: TRACE
    org.springframework.security: DEBUG

spring:
  application:
    name: token-validation-service

  # Exclude service-web components not needed for token validation
  autoconfigure:
    exclude:
      # We have our own OAuth2 security config with custom /auth/validate endpoint
      - org.budgetanalyzer.service.security.OAuth2ResourceServerSecurityConfig
      # Token validation service doesn't need a database
      - org.springframework.boot.autoconfigure.jdbc.DataSourceAutoConfiguration
      - org.springframework.boot.autoconfigure.orm.jpa.HibernateJpaAutoConfiguration

  # OAuth2 Resource Server configuration for JWT validation
  security:
    oauth2:
      resourceserver:
        jwt:
          # Auth0 issuer URI (abstracted through NGINX /auth/.well-known/openid-configuration)
          # In production, this will point to NGINX gateway
          # In development, can point directly to Auth0 or through NGINX
          issuer-uri: ${AUTH0_ISSUER_URI:https://dev-gcz1r8453xzz0317.us.auth0.com/}

# Custom configuration for audience validation
auth0:
  audience: ${AUTH0_AUDIENCE:https://api.budgetanalyzer.org}

# Actuator configuration
management:
  endpoints:
    web:
      exposure:
        include: health,info
  endpoint:
    health:
      show-details: always
      probes:
        enabled: true

# Service-web HTTP logging configuration
budgetanalyzer:
  service:
    http-logging:
      enabled: true
      log-level: DEBUG
      include-request-body: false  # No request bodies for validation service
      include-response-body: false # No response bodies needed
      exclude-patterns:
        - /actuator/**  # Don't log health checks
